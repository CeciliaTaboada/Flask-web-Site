<!DOCTYPE html>
<html lang="en">
<head>
{%block head%}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        <title>{%block title%} Sitio Web {%endblock%}</title>
{%endblock%}
</head>
<body>
    
{%block body%}
    {%block navbar%}
    <nav>
        <div>
                {% if user.is_authenticated %}
                <a href="/">Home</a>
                <a href="/logout">Logout</a>
                {% else %}
                <a href="/login">Login</a>
                <a href="/sign-up">Sign Up</a>
                {% endif %}
        </div>
    </nav>
    {%endblock%}
    {% with messages = get_flashed_messages(with_categories=true)%}
        {% if messages%}
            {% for category, message in messages%}
                {% if category == 'error'%}
                    <div role="alert">
                        {{message}}
                        <button type="button" class="close" data-dismiss="alert">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {%else%}
                    <div role="alert">
                        {{message}}
                        <button type="button" class="close" data-dismiss="alert">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {%endif%}
            {%endfor%}
        {%endif%}
    {%endwith%}

    <div class="container">
        {%block content%}

        {%endblock%}
    </div>


    {%block javascript%}
    <script type="text/javascript">
        function deleteNote(noteId){ /* This function sends a request to the backend */
            fetch("/delete-not", {
                method: "POST",
                body: JSON.stringify({ noteID: noteId }) /* delete the note */
            }).then((_res) => {
                window.location.href = "/"; /* refresh the page */
            });
        }
    </script>
    {%endblock%}
{%endblock%}
</body>
</html>